{% assign discount_notification_id = block.id | replace: '_', '' | downcase %}

{{ 'discount-notifications.css' | asset_url | stylesheet_tag }}

<div
  class="discount-notification discount-notification-{{ discount_notification_id }}"
  style="
    --background-color: {{ block.settings.background_color }};
    --gradient-color-1: {{ block.settings.gradient_color_1 }};
    --gradient-color-2: {{ block.settings.gradient_color_2 }};
    --gradient-opacity: {{ block.settings.gradient_opacity | divided_by: 100.0 }};
    --border-radius: {{ block.settings.border_radius }}px;
    --icon-size: {{ block.settings.icon_size }}px;
    --icon-background: {{ block.settings.icon_background }};
    --icon-color: {{ block.settings.icon_color }};
    --text-size: {{ block.settings.text_size }}px;
    --text-weight: {{ block.settings.text_weight }};
    --text-color: {{ block.settings.text_color }};
    --highlight-color: {{ block.settings.highlight_color }};
    --highlight-weight: {{ block.settings.highlight_weight }};
    --subtext-size: {{ block.settings.subtext_size }}px;
    --subtext-color: {{ block.settings.subtext_color }};
  "
  {{ block.shopify_attributes }}
>
  {% if block.settings.show_icon %}
    <div class="discount-notification__icon">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
           stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
        <line x1="7" y1="7" x2="7.01" y2="7"></line>
      </svg>
    </div>
  {% endif %}

  <div class="discount-notification__content">
    <p class="discount-notification__text">
      {{ block.settings.text_part_1 }}
      <span class="discount-notification__highlight">{{ block.settings.text_part_2 }}</span>
      {{ block.settings.text_part_3 }}
    </p>
    {% if block.settings.subtext != blank %}
      <p class="discount-notification__subtext">{{ block.settings.subtext }}</p>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Discount notification",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "text_part_1",
      "label": "Text before highlight",
      "default": "Get 2 items, save 5% for each"
    },
    {
      "type": "header",
      "content": "Icon"
    },
    {
      "type": "checkbox",
      "id": "show_icon",
      "label": "Show icon",
      "default": true
    },
    {
      "type": "range",
      "id": "icon_size",
      "min": 24,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Icon size",
      "default": 40
    },
    {
      "type": "color",
      "id": "icon_background",
      "label": "Icon background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Background"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#f5f5f5"
    },
    {
      "type": "color",
      "id": "gradient_color_1",
      "label": "Gradient start color",
      "default": "#e1edf5"
    },
    {
      "type": "color",
      "id": "gradient_color_2",
      "label": "Gradient end color",
      "default": "#eef1ea"
    },
    {
      "type": "range",
      "id": "gradient_opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Gradient opacity",
      "default": 80
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 14
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "text_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Text size",
      "default": 16
    },
    {
      "type": "select",
      "id": "text_weight",
      "label": "Text weight",
      "options": [
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semibold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "500"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "highlight_color",
      "label": "Highlight color",
      "default": "#1d3686"
    },
    {
      "type": "select",
      "id": "highlight_weight",
      "label": "Highlight weight",
      "options": [
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semibold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "700"
    },
    {
      "type": "range",
      "id": "subtext_size",
      "min": 10,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Subtext size",
      "default": 12
    },
    {
      "type": "color",
      "id": "subtext_color",
      "label": "Subtext color",
      "default": "#000000cf"
    }
  ],
  "presets": [
    {
      "name": "Discount notification"
    }
  ]
}
{% endschema %}